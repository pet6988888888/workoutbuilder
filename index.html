<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-Week Workout Challenge Builder</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script>
        // Define Tailwind Configuration with custom colors
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#111827',     // Darkest background
                        'secondary-dark': '#1f2937',   // Card/Cell background
                        'accent-teal': '#14b8a6',      // Teal for primary actions/highlights
                        'accent-cyan': '#06b6d4',      // Cyan for secondary highlights
                        'light-text': '#f3f4f6',       // Light text color
                    },
                }
            }
        }
    </script>


<script type="text/javascript">
        // Define storage keys and constants
        const PLAN_STORAGE_KEY = 'workoutChallengePlan';
        const CHALLENGE_TITLE_KEY = 'workoutChallengeTitle'; // New Key
        const DAILY_STATUS_KEY = 'workoutChallengeDailyStatus'; // New Key
        const DAYS_IN_CHALLENGE = 28;
        // Updated REST WORKOUT ID to match the newly generated full list (w18)
        const REST_WORKOUT_ID = 'w18'; 
        const WARM_UP_ID = 'w16'; // Constant for Warm Up
        const COOL_DOWN_ID = 'w17'; // Constant for Cool Down
        const DEFAULT_THUMBNAIL_URL = 'https://placehold.co/80x80/6B7280/FFFFFF?text=W'; // Placeholder image for lists
        const DEFAULT_LARGE_IMAGE_URL = 'https://placehold.co/400x300/6B7280/FFFFFF?text=GUIDE+IMAGE'; // Placeholder for large images


        // Application State
        let challengePlan = Array.from({ length: DAYS_IN_CHALLENGE }, () => []); 
        let challengeTitle = '4-Week Home Workout Challenge'; // Default title
        let dailyStatus = Array.from({ length: DAYS_IN_CHALLENGE }, () => 'unplanned'); // 'unplanned', 'completed', 'skipped'
        let currentDayIndex = null; 
        let selectedFilter = 'All'; 
        let selectedWorkoutsInModal = []; 
        let expandedWorkoutId = null; 
        
        // --- START OF FULL WORKOUT DATA (17 ACTIVE + 1 REST = 18 ENTRIES) ---
        const DEFAULT_WORKOUTS = [
            // --- BEGINNER WORKOUTS (w1 - w5) ---
{
    id: 'w1', name: 'HIWT Workout', type: 'HIWT', difficulty: 'Beginner', duration: '15 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=HIWT',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_74.jpg',
    description: '5 exercises performed for 20 sec on / 10 sec rest.\nOne full round = all 5 exercises.\nBeginners: 3 rounds.\nIntermediate: 4 rounds.\nAdvanced: 6 rounds.',
    structure: 'Warm-Up<br><br>\nKNEE PUSH-UPS x 20/10sec\nSQUATS x 20/10sec\nSQUAT & PRESS x 20/10sec\nMOUNTAIN CLIMBERS x 20/10sec\nJUMPING JACKS x 20/10sec<br><br>\nCool Down',
    tips: 'Take more rest if you need it but work towards doing the full workout without any extra rest.',
    focus: 'Strength & Conditioning',
    exercises: ['KNEE PUSH-UPS', 'SQUATS', 'SQUAT & PRESS', 'MOUNTAIN CLIMBERS', 'JUMPING JACKS']
},
{
    id: 'w2', name: '360 Core Workout', type: 'CORE', difficulty: 'Beginner', duration: '8 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=CORE',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_73.jpg',
    description: '4 static core exercises hitting the front, sides and back of your body.\nPerform each exercise for 30 seconds straight after each other.\nBeginners: 2 Rounds.\nIntermediate: 3 Rounds.\nAdvanced: 4 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-2: KNEE PLANK x 30sec\nBRIDGE HOLD x 30sec\nKNEE SIDE PLANK (R) x 30sec\nKNEE SIDE PLANK (L) x 30sec<br><br>\nCool Down',
    tips: 'Rest at the end of each round if you need rest. Try and improve by doing more rounds or harder versions of each exercise and resting less with each workout you do.',
    focus: 'Core Strength',
    exercises: ['KNEE PLANK', 'BRIDGE HOLD', 'KNEE SIDE PLANK (R)', 'KNEE SIDE PLANK (L)']
},
{
    id: 'w3', name: 'Muscle Building Workout', type: 'MUSCLE', difficulty: 'Beginner', duration: '20 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=MUSCLE',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_58%20(1).jpg',
    description: 'A GVT (German Volume Training) full body workout.\nPerform 5 sets of 10 reps (10x10x5) with only 10 seconds rest between each set for each of the 5 exercises.',
    structure: 'Warm-Up<br><br>\nKNEE PUSH-UP x (10 reps x 10 sec rest) x 5 sets\nBENT OVER ROW x (10 reps x 10 sec rest) x 5 sets\nSHOULDER PRESS x (10 reps x 10 sec rest) x 5 sets\nSQUAT x (10 reps x 10 sec rest) x 5 sets\nBRIDGE x (10 reps x 10 sec rest) x 5 sets<br><br>\nCool Down',
    tips: 'Rest 1 to 3 mins between each set. To adjust this workout to your own level you can use harder or easier exercises or heavier and lighter dumbbells. You can also increase the amount of sets if it is too easy for you.',
    focus: 'Muscle & Strength',
    exercises: ['KNEE PUSH-UP', 'BENT OVER ROW', 'SHOULDER PRESS', 'SQUAT', 'BRIDGE']
},
{
    id: 'w4', name: 'Abs Workout', type: 'ABS', difficulty: 'Beginner', duration: '6 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=ABS',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_69.jpg',
    description: '4 exercises: 3 traditional ab exercises (upper, lower, side) followed by a functional core exercise.\nPerform each exercise for 20 seconds followed by 10 seconds rest.\nBeginners: 2 Rounds.\nIntermediate: 3 Rounds.\nAdvanced: 4 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-2: HEEL TOUCHERS x 20/10sec\nCRUNCHES x 20/10sec\nREVERSE CRUNCH x 20/10sec\nPLANK x 20/10sec<br><br>\nCool Down',
    tips: 'Rest 30 sec after each round. Try and improve by doing more rounds and resting less with each workout you do.',
    focus: 'Abdominal Strength',
    exercises: ['HEEL TOUCHERS', 'CRUNCHES', 'REVERSE CRUNCH', 'PLANK']
},
{
    id: 'w5', name: 'HIIT Cardio Workout', type: 'HIIT', difficulty: 'Beginner', duration: '20 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=HIIT',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_70.jpg',
    description: 'Perform any cardio exercise you enjoy in a simple interval protocol:\n3 min warm-up (50% effort), 10 mins of work (30 sec max effort / 60 sec recovery), 2 min cool down (50% effort).',
    structure: 'Warm-Up: ANY CARDIO EXERCISE x 3 mins @ 50% effort<br><br>\n**Interval Work (10 mins total, Repeat 6 times):**\nANY CARDIO EXERCISE x 30sec @ 90% effort\nREST x 60sec @ 50% recovery<br><br>\nCool Down: ANY CARDIO EXERCISE x 2 mins @ 50% effort\nPOST WORKOUT STRETCHING ROUTINE',
    tips: 'You can do any cardio exercises that you enjoy for this workout, even going for a walk or on your spinning bike. Take more rest if you need it but work towards doing the full workout without any extra rest.',
    focus: 'Cardio & Endurance',
    exercises: ['ANY CARDIO EXERCISE']
},
{
    id: 'w6', name: 'HIWT Workout', type: 'HIWT', difficulty: 'Intermediate', duration: '25 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=HIWT',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/hiwtinter.jpg',
    description: '5 Combos and 1 Finisher using the 20/10 interval protocol.\nEach combo consists of 2 exercises, repeated 3 times.\nRest 30-60 seconds between combos.\nIntermediate: 3 Rounds of Each Combo + Finisher.',
    structure: 'Warm-Up<br><br>\nCOMBO 1 (x3): PUSH-UP x 20/10sec, LUNGE x 20/10sec\nCOMBO 2 (x3): BENT OVER ROW x 20/10sec, REVERSE LUNGE x 20/10sec\nCOMBO 3 (x3): PIKE PRESS x 20/10sec, PLIE SQUAT x 20/10sec\nCOMBO 4 (x3): BICEP CURL x 20/10sec, BRIDGE x 20/10sec\nCOMBO 5 (x3): DIAMOND PUSH-UP x 20/10sec, HALF SQUAT x 20/10sec\nFINISHER (x6): SQUAT, CURL & PRESS x 20/10sec<br><br>\nCool Down',
    tips: 'Take more rest if you need it, but work towards doing the full workout without any extra rest. Equipment needed: Body-Weight, Dumbbell.',
    focus: 'Strength & Conditioning',
    exercises: ['PUSH-UP', 'LUNGE', 'BENT OVER ROW', 'REVERSE LUNGE', 'PIKE PRESS', 'PLIE SQUAT', 'BICEP CURL', 'BRIDGE', 'DIAMOND PUSH-UP', 'HALF SQUAT', 'SQUAT, CURL & PRESS']
},
{
    id: 'w7', name: '360 Core Workout', type: 'CORE', difficulty: 'Intermediate', duration: '8 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=CORE',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/coreinter.jpg',
    description: '4 static core exercises hitting the front, sides, and back of your body.\nPerform each exercise for 30 seconds straight after each other.\nIntermediate: 3 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-3: FRONT PLANK x 30sec\nSIDE PLANK (LEFT) x 30sec\nSIDE PLANK (RIGHT) x 30sec\nBACK EXTENSION x 30sec<br><br>\nCool Down',
    tips: 'Rest at the end of each round if you need rest. Try to improve by doing more rounds or harder versions and resting less. Equipment needed: Body-Weight.',
    focus: 'Core Strength',
    exercises: ['FRONT PLANK', 'SIDE PLANK (LEFT)', 'SIDE PLANK (RIGHT)', 'BACK EXTENSION']
},
{
    id: 'w8', name: 'Muscle Building Workout', type: 'MUSCLE', difficulty: 'Intermediate', duration: '30-40 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=MUSCLE',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/muscleinter.jpg',
    description: 'A GVT (German Volume Training) full body workout.\nPerform 10 sets of 10 reps (10x10x10) with only 10 seconds rest between each set for each of the 5 exercises.',
    structure: 'Warm-Up<br><br>\nPUSH-UP: 10x10 (10 sec rest)\nBENT OVER ROW: 10x10 (10 sec rest)\nPIKE PRESS: 10x10 (10 sec rest)\nDB BICEP CURLS: 10x10 (10 sec rest)\nDEEP SQUAT: 10x10 (10 sec rest)<br><br>\nCool Down',
    tips: 'Rest 1-3 minutes between each of the 5 main exercises. If 10x10x10 is too hard, you can start with 10x10x5 (5 sets). Equipment needed: Body-Weight, Dumbbell.',
    focus: 'Muscle & Strength',
    exercises: ['PUSH-UP', 'BENT OVER ROW', 'PIKE PRESS', 'DB BICEP CURLS', 'DEEP SQUAT']
},
{
    id: 'w9', name: 'Abs Workout', type: 'ABS', difficulty: 'Intermediate', duration: '8 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=ABS',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/absinter.jpg',
    description: '4 exercises: 3 traditional ab exercises (upper, lower, side) followed by a functional core exercise.\nPerform each exercise for 20 seconds followed by 10 seconds rest.\nIntermediate: 4 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-4: CRUNCH x 20/10sec\nREVERSE CRUNCH x 20/10sec\nBICYCLE CRUNCH x 20/10sec\nMOUNTAIN CLIMBERS x 20/10sec<br><br>\nCool Down',
    tips: 'Rest 30 seconds after each round. Try to improve by doing more rounds and resting less. Equipment needed: Body-Weight, Dumbbell.',
    focus: 'Abdominal Strength',
    exercises: ['CRUNCH', 'REVERSE CRUNCH', 'BICYCLE CRUNCH', 'MOUNTAIN CLIMBERS']
},
{
    id: 'w10', name: 'HIIT Cardio Workout', type: 'HIIT', difficulty: 'Intermediate', duration: '17.5 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=HIIT',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/hiitinter.jpg',
    description: '5 cardio exercises combined in a 20/10 interval training format.\nOne full round = all 5 exercises.\nIntermediate: 4 rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-4: JUMPING JACKS x 20/10sec\nHIGH KNEES x 20/10sec\nBURPEES x 20/10sec\nMOUNTAIN CLIMBERS x 20/10sec\nSQUAT JUMPS x 20/10sec<br><br>\nCool Down',
    tips: 'Take more rest if you need it, but work towards doing the full workout without any extra rest. Equipment needed: Body-Weight, Dumbbell.',
    focus: 'Cardio & Endurance',
    exercises: ['JUMPING JACKS', 'HIGH KNEES', 'BURPEES', 'MOUNTAIN CLIMBERS', 'SQUAT JUMPS']
},
{
    id: 'w11', name: 'HIWT Workout', type: 'HIWT', difficulty: 'Advanced', duration: '25-35 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=HIWT',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/hiwtadv.jpg',
    description: '5 combos and one finisher exercise using the TABATA interval protocol.\nEach combo consists of 3 exercises, repeated 3 times.\nRest 30-60 seconds between combos.\nAdvanced: 3 Rounds of Each Combo + Finisher.',
    structure: 'Warm-Up<br><br>\nCOMBO 1 (x3): SPIDERMAN PUSH-UPS x 20/10sec, DB LUNGES x 20/10sec, WALKOUT & PUSHUP x 20/10sec\nCOMBO 2 (x3): QUICK BENT OVER ROWS x 20/10sec, STRAIGHT LEG DEADLIFT x 20/10sec, STRAIGHT LEG DEADLIFT COMBO x 20/10sec\nCOMBO 3 (x3): DB SHOULDER PRESS x 20/10sec, DB SUMO SQUAT x 20/10sec, SUMO SQUAT & PRESS x 20/10sec\nCOMBO 4 (x3): QUICK HUMMER CURLS x 20/10sec, DV REVERSE LUNGES x 20/10sec, HAMMER CURLS & REVERSE LUNGE COMBO x 20/10sec\nCOMBO 5 (x3): DIAMOND PUSH-UP x 20/10sec, DB SQUAT x 20/10sec, QUICK BURPEE x 20/10sec<br><br>\nCool Down',
    tips: 'Take more rest if you need it but work towards doing the full workout without any extra rest. Equipment needed: Body-Weight, Dumbbell.',
    focus: 'Strength & Conditioning',
    exercises: ['SPIDERMAN PUSH-UPS', 'DB LUNGES', 'WALKOUT & PUSHUP', 'QUICK BENT OVER ROWS', 'STRAIGHT LEG DEADLIFT', 'DB SHOULDER PRESS', 'DB SUMO SQUAT', 'SUMO SQUAT & PRESS', 'QUICK HUMMER CURLS', 'DV REVERSE LUNGES', 'DIAMOND PUSH-UP', 'DB SQUAT', 'QUICK BURPEE']
},
{
    id: 'w12', name: '360 Core Workout', type: 'CORE', difficulty: 'Advanced', duration: '8 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=CORE',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/coreadv.jpg',
    description: '4 dynamic core exercises hitting the front, sides and back of your body.\nPerform each exercise for 30 seconds straight after each other.\nAdvanced: 5 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-5: PLANK KNEE TO ELBOW x 30 sec\nSINGLE LEG REVERSE PLANK x 30sec (15sec Per Side)\nSIDE PLANK HIP LIFTS (R) x 30sec\nSIDE PLANK HIP LIFTS (L) x 30sec<br><br>\nCool Down',
    tips: 'Rest at the end of each round if you need rest. Try and improve by doing more rounds or harder versions of each exercise and resting less with each workout you do. Equipment needed: Body-Weight.',
    focus: 'Core Strength',
    exercises: ['PLANK KNEE TO ELBOW', 'SINGLE LEG REVERSE PLANK', 'SIDE PLANK HIP LIFTS (R)', 'SIDE PLANK HIP LIFTS (L)']
},
{
    id: 'w13', name: 'Muscle Building Workout', type: 'MUSCLE', difficulty: 'Advanced', duration: '30-40 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=MUSCLE',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/muscleadv.jpg',
    description: 'A GVT (German Volume Training) full body workout.\nPerform 10 sets of 10 reps (10x10x10) with only 10 seconds rest between each set for each of the 7 exercises.',
    structure: 'Warm-Up<br><br>\nDECLINE PUSH-UP x (10 reps x 10 sec rest) x 10 sets\nBENT OVER ROW x (10 reps x 10 sec rest) x 10 sets\nELEVATED PIKE PRESS x (10 reps x 10 sec rest) x 10 sets\nSTRAIGHT LEG DEADLIFT x (10 reps x 10 sec rest) x 10 sets\nDB SQUAT x (10 reps x 10 sec rest) x 10 sets\nARCHER PUSH-UP x (10 reps x 10 sec rest) x 10 sets\nSQUAT CURLS x (10 reps x 10 sec rest) x 10 sets<br><br>\nCool Down',
    tips: 'Rest 1 to 3 mins between each exercise. Use harder exercises or heavier dumbbells. If 10x10x10 is too hard, you can start by doing only 5 sets (10x10x5). Equipment needed: Body-Weight, Dumbbell, Chair.',
    focus: 'Muscle & Strength',
    exercises: ['DECLINE PUSH-UP', 'BENT OVER ROW', 'ELEVATED PIKE PRESS', 'STRAIGHT LEG DEADLIFT', 'DB SQUAT', 'ARCHER PUSH-UP', 'SQUAT CURLS']
},
{
    id: 'w14', name: 'Abs Workout', type: 'ABS', difficulty: 'Advanced', duration: '6 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=ABS',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/absadv.jpg',
    description: '4 exercises: 3 traditional ab exercises (upper, lower, side) followed by a dynamic core exercise.\nPerform each exercise for the allotted reps.\nAdvanced: 4 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-4: MB REVERSE CRUNCH x 20 reps\nMB DROP OFF x 20 reps\nBALL SLAMS x 20 reps\nMB RUSSIAN TWISTS x 20 reps<br><br>\nCool Down',
    tips: 'Rest 30 sec after each round. Try and improve by doing more rounds and resting less with each workout you do. Equipment needed: Medicine Ball.',
    focus: 'Abdominal Strength',
    exercises: ['MB REVERSE CRUNCH', 'MB DROP OFF', 'BALL SLAMS', 'MB RUSSIAN TWISTS']
},
{
    id: 'w15', name: 'HIIT Cardio Workout', type: 'HIIT', difficulty: 'Advanced', duration: '17.5 mins',
    thumbnailImage: 'https://placehold.co/80x80/2563eb/FFFFFF?text=HIIT',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/hiitadv.jpg',
    description: 'Combine 3 well known and more traditional cardio exercises with 2 functional exercises in a 20/10 interval training format.\nOne full round = all 5 exercises.\nAdvanced: 7 Rounds.',
    structure: 'Warm-Up<br><br>\nRound 1-7: BURPEES x 20/10sec\nHIGH KNEE SPRINTS x 20/10sec\nJUMPING LUNGES x 20/10sec\nPLANK JACKS x 20/10sec\nTHRUSTERS x 20/10sec<br><br>\nCool Down',
    tips: 'Take more rest if you need it, but work towards doing the full workout without any extra rest. Try and improve by doing more rounds and resting less with each workout you do. Equipment needed: Body-Weight.',
    focus: 'Cardio & Endurance',
    exercises: ['BURPEES', 'HIGH KNEE SPRINTS', 'JUMPING LUNGES', 'PLANK JACKS', 'THRUSTERS']
},

            // --- UTILITY & RECOVERY WORKOUTS (w16 - w18) ---
{
    id: WARM_UP_ID, name: 'Warm-Up', type: 'WARMUP', difficulty: 'All Levels', duration: '10 min',
    thumbnailImage: 'https://placehold.co/80x80/facc15/000000?text=WU',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_71.jpg',
    description: 'A full-body warm-up designed to prepare your muscles, joints, and mind before any HIIT, HIWT, or Muscle workout.',
    structure: 'Jumping Jacks (3 min)\nLeg Swings (20 per side)\nHamstring Stretch (5 per side)\nQuad Stretch (5 per side)\nLunge Chest Stretch (10 reps)\nArm Swings (20 reps)\nBack Rolls (10 reps)\nCat Stretch (10 reps)\nPike Push-Up (5 reps)',
    tips: 'Start slowly and increase range and speed gradually. Replace harder movements with easier versions if needed.',
    focus: 'Mobility & Activation',
    exercises: [
        'Jumping Jacks',
        'Leg Swings',
        'Hamstring Stretch',
        'Quad Stretch',
        'Lunge Chest Stretch',
        'Arm Swings',
        'Back Rolls',
        'Cat Stretch',
        'Pike Push-Up'
    ]
},
{
    id: COOL_DOWN_ID, name: 'Cool Down', type: 'COOLDOWN', difficulty: 'All Levels', duration: '6 min',
    thumbnailImage: 'https://placehold.co/80x80/38bdf8/FFFFFF?text=CD',
    documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_72.jpg',
    description: 'A gentle stretching routine to lower your heart rate, loosen tight muscles, and speed up recovery after any workout.',
    structure: 'Shoulder Stretch (30 sec per side)\nChest Stretch (30 sec per side)\nHip Flexors Stretch (30 sec per side)\nHamstring Stretch (30 sec per side)\nPigeon Stretch (30 sec per side)\nButterfly Stretch (30 sec)',
    tips: 'Breathe deeply — inhale through your nose and exhale through your mouth. Try to increase the stretch slightly on each exhale.',
    focus: 'Recovery & Flexibility',
    exercises: [
        'Shoulder Stretch',
        'Chest Stretch',
        'Hip Flexors Stretch',
        'Hamstring Stretch',
        'Pigeon Stretch',
        'Butterfly Stretch'
    ]
},
            { 
                id: REST_WORKOUT_ID, name: 'Rest Day', type: 'REST', difficulty: 'All Levels', duration: 'N/A', 
                thumbnailImage: 'https://placehold.co/80x80/6B7280/FFFFFF?text=REST', 
                documentImage: 'https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Gemini_Generated_Image_rb4ihxrb4ihxrb4i.png', 
                description: 'Full physical rest to allow muscles to repair and grow stronger.\nCrucial for recovery and injury prevention.\nThis includes optional light activities like Yoga, Sport, or Calisthenics Skills.', 
                structure: 'Focus on sleep, nutrition, and hydration.\nOptional: 15 minutes of light walking or foam rolling.', 
                tips: 'Avoid strenuous activity.\nPrioritize 7-9 hours of sleep.\nThis is when the gains happen!', focus: 'All',
                exercises: ['Light Walking', 'Foam Rolling']
            }
        ];
        
        // Workout data is loaded from the hardcoded list
        let customWorkouts = DEFAULT_WORKOUTS; 


        // --- Utility functions ---
        
        const getWorkoutById = (id) => customWorkouts.find(w => w.id === id);
        // The filter types are dynamically generated based on the new 18 workouts
        const getWorkoutTypes = () => ['All', ...new Set(customWorkouts.map(w => w.type))];
        const isSelected = (id) => selectedWorkoutsInModal.includes(id);


        // --- Main App Rendering and View Management ---
        
        const renderApp = () => {
            // Only the Schedule View remains
            renderChallengeGrid();
        };
        
        // --- Challenge Grid (Schedule View) Logic (Updated to use customWorkouts) ---
        
        const renderChallengeGrid = () => {
            const gridContainer = document.getElementById('challengeGrid');
            if (!gridContainer || customWorkouts.length === 0) {
                 gridContainer.innerHTML = '<p class="col-span-7 text-center text-gray-400">Loading workouts...</p>';
                 return;
            }


            gridContainer.innerHTML = ''; 


            for (let i = 0; i < DAYS_IN_CHALLENGE; i++) {
                const workoutIds = challengePlan[i];
                // Filter out Warm Up and Cool Down so they don't clutter the grid cells
                const mainWorkoutIds = workoutIds.filter(id => id !== WARM_UP_ID && id !== COOL_DOWN_ID);
                const workouts = mainWorkoutIds.map(id => getWorkoutById(id)).filter(w => w !== undefined);
                
                const week = Math.floor(i / 7) + 1;
                const day = (i % 7) + 1;


                // The cell now has a split click zone
                const cell = document.createElement('div');
                cell.className = 'challenge-cell rounded-lg p-3 bg-secondary-dark shadow-xl flex flex-col justify-between relative'; // Added relative

                
                // 2. Main Content Wrapper (Handles workout selection)
                const mainContentWrapper = document.createElement('div');
                mainContentWrapper.className = 'flex-grow cursor-pointer pt-2 text-center flex flex-col items-center justify-center';
                mainContentWrapper.title = `Click to edit workouts for Week ${week}, Day ${day}`;

                // Set click handler for main content to open modal
                mainContentWrapper.onclick = (e) => {
                    e.stopPropagation(); 
                    openWorkoutSelection(i);
                };

                let contentHtml = `<p class="font-bold text-light-text text-sm md:text-base">W${week} | Day ${day}</p>`;


                if (workouts.length > 0) {
                    // Check if only w18 (Rest) is scheduled for styling
                    const isRestDay = workouts.length === 1 && workouts[0].id === REST_WORKOUT_ID;

                    const workoutListHtml = workouts.map(w => `
                        <div class="text-xs leading-tight">
                            <span class="font-semibold ${isRestDay ? 'text-red-500' : 'text-accent-teal'}">${w.name}</span>
                        </div>
                    `).join('');


                    contentHtml += `<div class="my-2 space-y-1 text-sm">${workoutListHtml}</div>`;
                    
                } else {
                    contentHtml += `
                        <div class="flex-grow flex items-center justify-center text-center text-gray-400">
                            <p class="text-sm">Unplanned / Click to add</p>
                        </div>
                    `;
                }


                mainContentWrapper.innerHTML = contentHtml;
                cell.appendChild(mainContentWrapper);
                gridContainer.appendChild(cell);
            }
        };


        
        // --- Local Storage Management for Challenge Plan ---
        
        const savePlan = () => {
            localStorage.setItem(PLAN_STORAGE_KEY, JSON.stringify(challengePlan));
            localStorage.setItem(CHALLENGE_TITLE_KEY, challengeTitle); // Save title
            localStorage.setItem(DAILY_STATUS_KEY, JSON.stringify(dailyStatus)); // Save status
        };


        const loadPlan = () => {
            const savedPlan = localStorage.getItem(PLAN_STORAGE_KEY);
            if (savedPlan) {
                try {
                    const loadedPlan = JSON.parse(savedPlan);
                    if (Array.isArray(loadedPlan) && loadedPlan.length === DAYS_IN_CHALLENGE) {
                        challengePlan = loadedPlan.map(day => 
                            Array.isArray(day) 
                                ? day.filter(id => id !== WARM_UP_ID && id !== COOL_DOWN_ID) 
                                : []
                        );
                    }
                } catch (e) {
                    console.error("Error loading challenge plan from storage:", e);
                }
            }

            // Load new state variables
            const savedTitle = localStorage.getItem(CHALLENGE_TITLE_KEY);
            if (savedTitle) {
                challengeTitle = savedTitle;
            }

            const savedStatus = localStorage.getItem(DAILY_STATUS_KEY);
            if (savedStatus) {
                try {
                    const loadedStatus = JSON.parse(savedStatus);
                    if (Array.isArray(loadedStatus) && loadedStatus.length === DAYS_IN_CHALLENGE) {
                        dailyStatus = loadedStatus;
                    }
                } catch (e) { /* ignore */ }
            }

            // Ensure the title is displayed on load
            if(document.getElementById('mainChallengeTitle')) {
                 document.getElementById('mainChallengeTitle').textContent = challengeTitle;
            }
        };


        // --- New Daily Status Toggle Logic ---
        const toggleDayStatus = (index) => {
            const currentStatus = dailyStatus[index];
            const nextStatusMap = {
                'unplanned': 'completed',
                'completed': 'skipped',
                'skipped': 'unplanned',
            };
            dailyStatus[index] = nextStatusMap[currentStatus];
            savePlan();
            renderChallengeGrid(); 
        };
        
        // --- Challenge Day Selection Logic (WorkoutSelectionModal) ---
        
        const confirmSelection = () => {
            if (currentDayIndex !== null) {
                // Remove duplicates and save the final order
                challengePlan[currentDayIndex] = Array.from(new Set(selectedWorkoutsInModal));
                
                // If a workout is scheduled, set status to 'unplanned' (unless it was already completed/skipped)
                if (challengePlan[currentDayIndex].length > 0 && dailyStatus[currentDayIndex] === 'unplanned') {
                    dailyStatus[currentDayIndex] = 'unplanned'; 
                } else if (challengePlan[currentDayIndex].length === 0) {
                     dailyStatus[currentDayIndex] = 'unplanned';
                }

                renderChallengeGrid();
                savePlan();
                closeWorkoutSelection();
            }
        };
        
        const openWorkoutSelection = (index) => {
            currentDayIndex = index;
            // The selection modal only deals with the main workouts (excluding WU/CD)
            selectedWorkoutsInModal = challengePlan[index]; 
            expandedWorkoutId = null;
            
            const week = Math.floor(index / 7) + 1;
            const day = (index % 7) + 1;
            document.getElementById('modalTitle').textContent = `Edit Workouts for Week ${week}, Day ${day}`;
            
            initializeFilters();
            renderWorkoutList();


            document.getElementById('workoutSelectionModal').classList.remove('hidden');
        };


        const closeWorkoutSelection = () => {
            currentDayIndex = null;
            selectedWorkoutsInModal = []; 
            expandedWorkoutId = null; 
            document.getElementById('workoutSelectionModal').classList.add('hidden');
        };


        const toggleWorkoutSelection = (workoutId) => {
            const index = selectedWorkoutsInModal.indexOf(workoutId);
            
            const workout = getWorkoutById(workoutId);
            
            // Do not allow selection of Warm Up or Cool Down directly, they are not intended for daily scheduling
            if (workout?.type === 'WARM UP' || workout?.type === 'COOL DOWN') {
                return; 
            }

            // Handle REST special case (w18)
            if (workout?.type === 'REST') {
                // If rest is selected, remove all others. If deselected, remove only rest.
                if (index > -1) {
                    selectedWorkoutsInModal = [];
                } else {
                    selectedWorkoutsInModal = [workoutId];
                }
            } else {
                // If a real workout is selected, remove rest (w18) from the list if present
                selectedWorkoutsInModal = selectedWorkoutsInModal.filter(id => id !== REST_WORKOUT_ID);
                if (index > -1) {
                    selectedWorkoutsInModal.splice(index, 1);
                } else {
                    selectedWorkoutsInModal.push(workoutId);
                }
            }
            renderWorkoutList(); 
        }


        const toggleWorkoutDetails = (workoutId) => {
            expandedWorkoutId = expandedWorkoutId === workoutId ? null : workoutId;
            renderWorkoutList(); 
        }


        const renderWorkoutList = () => {
            const listContainer = document.getElementById('modalWorkoutList');
            if (!listContainer) return;


            const filteredWorkouts = selectedFilter === 'All'
                ? customWorkouts
                : customWorkouts.filter(w => w.type === selectedFilter);

            // Filter out Warm Up and Cool Down from the main selection list
            const selectableWorkouts = filteredWorkouts.filter(w => w.type !== 'WARM UP' && w.type !== 'COOL DOWN');


            listContainer.innerHTML = selectableWorkouts.map(w => {
                const selected = isSelected(w.id);
                const isExpanded = expandedWorkoutId === w.id;
                const bgColor = selected ? 'bg-accent-teal border-accent-teal' : 'bg-secondary-dark border-gray-700 hover:bg-gray-700';
                const textColor = selected ? 'text-primary-dark' : 'text-light-text';
                const iconColor = selected ? 'text-primary-dark' : 'text-accent-cyan';
                const isRest = w.type === 'REST';


                // Details Section HTML
                const detailsHtml = isExpanded ? `
                    <div class="mt-4 pt-4 border-t ${selected ? 'border-primary-dark/30' : 'border-gray-700'}">
                        <p class="font-semibold ${selected ? 'text-primary-dark/80' : 'text-gray-300'} mb-2">Description:</p>
                        <p class="text-sm ${selected ? 'text-primary-dark/90' : 'text-gray-400'} mb-3 whitespace-pre-wrap">${w.description}</p>
                        
                        <p class="font-semibold ${selected ? 'text-primary-dark/80' : 'text-gray-300'} mb-2">Structure:</p>
                        <p class="text-sm ${selected ? 'text-primary-dark/90' : 'text-gray-400'} mb-3 whitespace-pre-wrap">${w.structure}</p>
                        
                        <p class="font-semibold ${selected ? 'text-primary-dark/80' : 'text-gray-300'} mb-2">Tips:</p>
                        <p class="text-sm ${selected ? 'text-primary-dark/90' : 'text-gray-400'} whitespace-pre-wrap">${w.tips}</p>
                    </div>
                ` : '';


                return `
                    <div class="workout-card ${bgColor} p-4 rounded-xl shadow-xl border mb-4 relative">
                        <div onclick="toggleWorkoutSelection('${w.id}')" class="flex items-start cursor-pointer transition duration-100 hover:opacity-90">
                            <div class="mr-4 flex-shrink-0">
                                <img src="${w.thumbnailImage || DEFAULT_THUMBNAIL_URL}" alt="${w.name} image" onerror="this.onerror=null; this.src='${DEFAULT_THUMBNAIL_URL}'" class="w-20 h-20 rounded-lg object-cover shadow-md border ${selected ? 'border-primary-dark' : 'border-gray-600'}">
                            </div>
                            <div class="flex-grow">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-xl ${textColor}">${w.name}</p>
                                        <div class="mt-1 text-xs space-x-2 flex items-center">
                                            <span class="bg-gray-700 ${selected ? 'text-primary-dark bg-gray-200' : 'text-light-text'} px-2 py-0.5 rounded-full font-bold">${w.type}</span>
                                            <span class="font-medium ${selected ? 'text-primary-dark/80' : 'text-gray-300'}">${w.difficulty} | ${w.duration}</span>
                                        </div>
                                    </div>
                                    <div class="p-2 ${iconColor} flex-shrink-0">
                                        <i class="${selected ? 'fas fa-check-circle' : 'fas fa-circle-plus'} text-2xl"></i>
                                    </div>
                                </div>
                                <p class="text-sm mt-3 ${selected ? 'text-primary-dark/90' : 'text-gray-400'} italic">
                                    ${w.description.substring(0, 80).replace(/\n/g, ' ')}...
                                </p>
                            </div>
                        </div>
                        <div id="details-${w.id}" class="${isExpanded ? 'max-h-expand' : 'max-h-collapse'} overflow-hidden">
                            ${detailsHtml}
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="toggleWorkoutDetails('${w.id}')" class="text-sm font-semibold py-1 px-3 rounded-full transition duration-150 
                                ${selected ? 'bg-primary-dark/10 text-primary-dark hover:bg-primary-dark/30' : 'bg-gray-700 text-accent-cyan hover:bg-gray-600'}">
                                <i class="fas ${isExpanded ? 'fa-chevron-up' : 'fa-chevron-down'} mr-1"></i> 
                                ${isExpanded ? 'Show Less Details' : 'Expand Full Workout'}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        };


        const initializeFilters = () => {
            const filterContainer = document.getElementById('modalFilterContainer');
            // Filter out Warm Up and Cool Down from the main filter bar
            const types = getWorkoutTypes().filter(type => type !== 'WARM UP' && type !== 'COOL DOWN');


            filterContainer.innerHTML = types.map(type => `
                <button
                    onclick="setFilter('${type}')"
                    class="filter-btn text-sm px-4 py-2 rounded-full font-bold transition duration-150 ${selectedFilter === type ? 'bg-accent-cyan text-primary-dark shadow-xl' : 'bg-gray-700 text-light-text hover:bg-gray-600'}"
                >
                    ${type}
                </button>
            `).join('');
        };


        const setFilter = (type) => {
            selectedFilter = type;
            expandedWorkoutId = null; 
            initializeFilters(); 
            renderWorkoutList();
        };


        // --- Other Utility Functions (clearPlan, executeAutoFill, generateChallengeDocument) ---
        
        /** Clears the entire challenge plan. */
        const clearPlan = () => {
            const confirmationModal = document.getElementById('confirmationModal');
            document.getElementById('confirmAction').onclick = () => {
                challengePlan = Array.from({ length: DAYS_IN_CHALLENGE }, () => []);
                dailyStatus = Array.from({ length: DAYS_IN_CHALLENGE }, () => 'unplanned');
                localStorage.removeItem(PLAN_STORAGE_KEY);
                localStorage.removeItem(DAILY_STATUS_KEY);
                renderChallengeGrid();
                confirmationModal.classList.add('hidden');
            };
            document.getElementById('cancelAction').onclick = () => {
                confirmationModal.classList.add('hidden');
            };
            document.getElementById('modalMessage').textContent = 'Are you sure you want to clear the entire 4-week challenge plan and all progress tracking?';
            document.getElementById('confirmAction').classList.remove('hidden'); 
            document.getElementById('cancelAction').textContent = 'Cancel'; 
            confirmationModal.classList.remove('hidden'); // Show it now
        };

        
        /** Executes the auto-fill based on the goal using the user-provided schedules. */
        const executeAutoFill = () => {
            const goal = document.querySelector('input[name="goal"]:checked')?.value;
            const difficulty = document.querySelector('input[name="difficulty"]:checked')?.value;
            
            if (!goal || !difficulty) {
                console.error("Goal or Difficulty not selected.");
                return;
            }
            
            // --- Workout ID Mappings based on full 18 Workouts ---
            const REST_ID = REST_WORKOUT_ID; 
            
            
            // Helper function to dynamically map workout types to the correct difficulty ID
            const getWorkoutId = (type, diff) => {
                // Map difficulty labels to the corresponding range in the ID list (w1-w5 B, w6-w10 I, w11-w15 A)
                let idRangeStart;
                if (diff === 'Beginner') idRangeStart = 1;
                else if (diff === 'Intermediate') idRangeStart = 6;
                else if (diff === 'Advanced') idRangeStart = 11;
                else return null; 

                const baseMap = {
                    'HIWT': 0,
                    'HIIT': 1,
                    'CORE': 2,
                    'ABS': 3,
                    'MUSCLE BUILDING': 4,
                };

                const offset = baseMap[type];
                if (offset !== undefined) {
                    return `w${idRangeStart + offset}`;
                }
                return null;
            }

            
            // Map specific IDs for the selected difficulty
            const hiwtWorkout = getWorkoutId('HIWT', difficulty);
            const hiitWorkout = getWorkoutId('HIIT', difficulty);
            const coreWorkout = getWorkoutId('CORE', difficulty);
            const absWorkout = getWorkoutId('ABS', difficulty);
            const muscleBuilding = getWorkoutId('MUSCLE BUILDING', difficulty);


            for (let i = 0; i < DAYS_IN_CHALLENGE; i++) {
                const dayOfWeek = i % 7; // 0=Mon, 1=Tue, ..., 6=Sun
                
                let workoutsForDay = [];

                switch (goal) {
                    case 'Weight Loss':
                        // Schedule: HIIT + CORE, HIWT, HIIT + ABS, HIWT, HIIT + CORE, MUSCLE, REST
                        switch (dayOfWeek) {
                            case 0: // Mon: HIIT + CORE
                                workoutsForDay = [hiitWorkout, coreWorkout];
                                break;
                            case 1: // Tue: HIWT
                                workoutsForDay = [hiwtWorkout];
                                break;
                            case 2: // Wed: HIIT + ABS
                                workoutsForDay = [hiitWorkout, absWorkout];
                                break;
                            case 3: // Thu: HIWT
                                workoutsForDay = [hiwtWorkout];
                                break;
                            case 4: // Fri: HIIT + CORE
                                workoutsForDay = [hiitWorkout, coreWorkout];
                                break;
                            case 5: // Sat: MUSCLE
                                workoutsForDay = [muscleBuilding];
                                break;
                            case 6: // Sun: REST
                                workoutsForDay = [REST_ID];
                                break;
                        }
                        break;

                    case 'Muscle Building':
                        // Schedule: MUSCLE, HIIT + ABS, MUSCLE, HIIT + CORE, MUSCLE, HIIT + ABS, REST
                        switch (dayOfWeek) {
                            case 0: // Mon: MUSCLE
                                workoutsForDay = [muscleBuilding]; 
                                break;
                            case 1: // Tue: HIIT + ABS
                                workoutsForDay = [hiitWorkout, absWorkout];
                                break;
                            case 2: // Wed: MUSCLE
                                workoutsForDay = [muscleBuilding]; 
                                break;
                            case 3: // Thu: HIIT + CORE
                                workoutsForDay = [hiitWorkout, coreWorkout];
                                break;
                            case 4: // Fri: MUSCLE
                                workoutsForDay = [muscleBuilding];
                                break;
                            case 5: // Sat: HIIT + ABS
                                workoutsForDay = [hiitWorkout, absWorkout];
                                break;
                            case 6: // Sun: REST
                                workoutsForDay = [REST_ID];
                                break;
                        }
                        break;
                        
                    case 'Maintenance':
                        // Schedule: HIWT + ABS, REST, HIIT + CORE, REST, MUSCLE, REST, REST
                        switch (dayOfWeek) {
                            case 0: // Mon: HIWT + ABS
                                workoutsForDay = [hiwtWorkout, absWorkout];
                                break;
                            case 1: // Tue: REST (Active/Recovery)
                                workoutsForDay = [REST_ID];
                                break;
                            case 2: // Wed: HIIT + CORE
                                workoutsForDay = [hiitWorkout, coreWorkout];
                                break;
                            case 3: // Thu: REST (Active/Recovery)
                                workoutsForDay = [REST_ID];
                                break;
                            case 4: // Fri: MUSCLE
                                workoutsForDay = [muscleBuilding];
                                break;
                            case 5: // Sat: REST (Active/Recovery)
                                workoutsForDay = [REST_ID];
                                break;
                            case 6: // Sun: REST
                                workoutsForDay = [REST_ID];
                                break;
                        }
                        break;

                    default:
                        // Fallback: clear the day
                        workoutsForDay = [];
                        break;
                }

                // Simply save the workout IDs, removing nulls/undefineds and ensuring REST only if present.
                let finalWorkouts = workoutsForDay.filter(id => id && getWorkoutById(id));
                if (finalWorkouts.includes(REST_ID)) {
                    finalWorkouts = [REST_ID];
                }

                // Filter out any potential duplicates
                challengePlan[i] = Array.from(new Set(finalWorkouts));
                
                // Reset status for newly generated plan
                dailyStatus[i] = 'unplanned'; 
            }
            
            renderChallengeGrid();
            savePlan();
            closeAutoFillOptions();
        };

        /** Helper function to convert newline-separated text into an HTML list for the document. 
         * Preserves existing <ul> or <ol> tags if they are present.
         */
        const formatTextAsList = (text) => {
            if (!text || typeof text !== 'string') return '';
            
            // If the content already contains HTML list structure, return it as is
            if (text.includes('<ul>') || text.includes('<ol>') || text.includes('<li>')) {
                return text; 
            }
            
            // Split the text by newline, filter out empty lines, and map to <li>
            const lines = text.split('\n').filter(line => line.trim() !== '');
            
            if (lines.length === 0) return '';
            
            // Wrap each line in a list item and the whole thing in an unordered list
            return `<ul style="margin-top: 5px; padding-left: 20px; list-style-type: disc;">${lines.map(line => `<li style="margin-bottom: 5px; color: #4b5563; font-size: 0.95rem;">${line.trim()}</li>`).join('')}</ul>`;
        };


        const generateChallengeDocument = () => {
            let docContent = ``;
            const daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

            // 1. Data Gathering for Document
            const scheduledWorkoutIds = new Set();
            challengePlan.flat().forEach(id => {
                if (id) scheduledWorkoutIds.add(id);
            });
            
            // Manually add Warm Up (w16) and Cool Down (w17) to the list of unique workouts
            scheduledWorkoutIds.add(WARM_UP_ID); 
            scheduledWorkoutIds.add(COOL_DOWN_ID); 


            // Convert set of IDs to workout objects
            let allScheduledWorkouts = Array.from(scheduledWorkoutIds).map(id => getWorkoutById(id)).filter(w => w !== undefined);
            
            // Sort: Primary Workouts (w1-w15) -> Rest (w18) -> Warm Up (w16) -> Cool Down (w17)
            const finalOrder = allScheduledWorkouts.sort((a, b) => {
                const orderMap = { [REST_WORKOUT_ID]: 99, [WARM_UP_ID]: 100, [COOL_DOWN_ID]: 101 }; 
                const aOrder = orderMap[a.id] || 0; 
                const bOrder = orderMap[b.id] || 0; 
                
                // Fallback for regular workouts: sort by ID numerically
                if (aOrder === 0 && bOrder === 0) {
                    return parseInt(a.id.substring(1)) - parseInt(b.id.substring(1));
                }
                
                return aOrder - bOrder;
            });
            
            // Calculate Progress Summary
            const completedCount = dailyStatus.filter(s => s === 'completed').length;
            const skippedCount = dailyStatus.filter(s => s === 'skipped').length;
            const plannedDays = challengePlan.filter(day => day.length > 0).length; // Days with at least one workout/rest scheduled
            const totalScheduledDays = 28;
            const completionRate = plannedDays > 0 ? ((completedCount / plannedDays) * 100).toFixed(1) : 0;





            // 2. Section 1: Schedule Grid 
            let scheduleHtml = `<h2 style="color: #1f2937; margin-top: 1.5rem; font-size: 1.5rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.3rem;">1. ${challengeTitle} Schedule</h2>`;
            scheduleHtml += `<p style="color: #4b5563; font-size: 1rem; margin-bottom: 20px;">This is the high-level view of your 28-day challenge plan, showing the scheduled core workouts for each day. Remember to perform a Warm Up before and a Cool Down after every non-Rest workout.</p>`;
            scheduleHtml += `<table style="width: 100%; border-collapse: collapse; margin-top: 15px; text-align: left; font-size: 0.9rem;">`;
            scheduleHtml += `<thead><tr>`;
            
            daysOfWeek.forEach(day => {
                scheduleHtml += `<th style="background-color: #f3f4f6; padding: 10px; border: 1px solid #d1d5db; color: #1f2937; text-align: center;">${day}</th>`;
            });
            scheduleHtml += `</tr></thead><tbody>`;


            for (let week = 0; week < 4; week++) {
                scheduleHtml += `<tr>`;
                for (let day = 0; day < 7; day++) {
                    const index = week * 7 + day;
                    const workoutIds = challengePlan[index];
                    const mainWorkoutIds = workoutIds.filter(id => id !== WARM_UP_ID && id !== COOL_DOWN_ID);

                    const workouts = mainWorkoutIds.map(id => getWorkoutById(id)).filter(w => w !== undefined);
                    
                    let cellContent = '';
                    if (workouts.length > 0) {
                        cellContent = workouts.map(w => `<span style="font-weight: bold; color: ${w.type === 'REST' ? '#dc2626' : '#14b8a6'};">${w.name}</span>`).join('<hr style="margin: 4px 0; border-top: 1px dashed #e5e7eb;">');
                    } else {
                        cellContent = '<span style="color: #9ca3af; font-style: italic;">Unplanned</span>';
                    }
                    
                    scheduleHtml += `<td style="padding: 10px; border: 1px solid #d1d5db; vertical-align: top; background-color: ${day % 2 === 0 ? '#f9fafb' : '#ffffff'};">
                        <span style="font-weight: bold; color: #374151; font-size: 0.85rem;">W${week + 1} | Day ${day + 1}</span>
                        <div style="margin-top: 5px;">${cellContent}</div>
                    </td>`;
                }
                scheduleHtml += `</tr>`;
            }


            scheduleHtml += `</tbody></table>`;
            docContent += scheduleHtml;
            docContent += `<hr style="margin: 2.5rem 0; border: none; border-top: 3px double #e5e7eb;">`;


            // 3. Section 2: Detailed Workouts 
            let workoutDetailsHtml = `<h2 style="color: #1f2937; margin-top: 1.5rem; font-size: 1.5rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.3rem;">2. Detailed Workout Descriptions</h2>`;
            workoutDetailsHtml += `<p style="color: #4b5563; font-size: 1rem; margin-bottom: 20px;">Below are the complete details for every unique workout in your plan, including the essential Warm Up and Cool Down routines for safe and effective training.</p>`;


            finalOrder.forEach((w) => { // ITERATING OVER ORDERED LIST
                // Use the single documentImage field
                const largeImageSrc = w.documentImage || DEFAULT_LARGE_IMAGE_URL;


                workoutDetailsHtml += `
                    <div style="border: 1px solid #d1d5db; border-radius: 12px; padding: 20px; margin-bottom: 25px; background-color: #f9fafb; box-shadow: 0 4px 6px rgba(0,0,0,0.05); page-break-inside: avoid;">
                        
                        <div style="width: 100%; margin-bottom: 20px; text-align: center;">
    <img src="${largeImageSrc}" alt="${w.name} guide"
 onerror="this.onerror=null; this.src='${DEFAULT_LARGE_IMAGE_URL}'"
 style="width: 100%; height: auto; border-radius: 8px; border: 1px solid #a1a1aa; object-fit: cover; margin: 0 auto; display: block;">
</div>


                        <h3 style="margin-top: 0; margin-bottom: 5px; color: #1f2937; font-size: 1.4rem; font-weight: bold;">${w.name}</h3>
                        <p style="margin-top: 0; color: #6b7280; font-size: 0.9rem; line-height: 1.4;">
                            <strong style="color: #14b8a6;">Type:</strong> ${w.type} | 
                            <strong style="color: #14b8a6;">Duration:</strong> ${w.duration} | 
                            <strong style="color: #14b8a6;">Difficulty:</strong> ${w.difficulty}
                        </p>
                        
                        <h4 style="margin-top: 15px; color: #374151; font-size: 1.1rem; font-weight: bold;">Description:</h4>
                        ${formatTextAsList(w.description)}


                        <h4 style="margin-top: 15px; color: #374151; font-size: 1.1rem; font-weight: bold;">Structure:</h4>
                        ${formatTextAsList(w.structure)}


                        <h4 style="margin-top: 15px; color: #374151; font-size: 1.1rem; font-weight: bold;">Tips:</h4>
                        ${formatTextAsList(w.tips)}


                    </div>
                `;
            });


            docContent += workoutDetailsHtml;
            docContent += `<hr style="margin: 2.5rem 0; border: none; border-top: 3px double #e5e7eb;">`;
            
            // 4. NEW: Section 3: Tracking Sheet
            let trackingSheetHtml = `<h2 style="color: #1f2937; margin-top: 1.5rem; font-size: 1.5rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.3rem;">3. Weekly Progress Tracking Sheet (Printable)</h2>`;
            trackingSheetHtml += `<p style="color: #4b5563; font-size: 1rem; margin-bottom: 20px;">Use this sheet to track workout completion, rate your effort, and make notes on how the session went (e.g., increased weight, difficulty, energy levels).</p>`;

            for (let week = 0; week < 4; week++) {
                trackingSheetHtml += `<h3 style="margin-top: 25px; color: #14b8a6; font-size: 1.2rem; font-weight: bold; border-bottom: 1px dashed #d1d5db; padding-bottom: 5px;">WEEK ${week + 1} TRACKING</h3>`;
                trackingSheetHtml += `<table style="width: 100%; border-collapse: collapse; margin-top: 10px; text-align: left; font-size: 0.85rem; page-break-inside: auto;">`;
                
                // Table Headers
                trackingSheetHtml += `<thead><tr>`;
                trackingSheetHtml += `<th style="background-color: #f3f4f6; padding: 8px; border: 1px solid #d1d5db; color: #1f2937; width: 15%; min-width: 80px;">Day</th>`;
                trackingSheetHtml += `<th style="background-color: #f3f4f6; padding: 8px; border: 1px solid #d1d5db; color: #1f2937; width: 25%;">Scheduled Workout(s)</th>`;
                trackingSheetHtml += `<th style="background-color: #f3f4f6; padding: 8px; border: 1px solid #d1d5db; color: #1f2937; width: 15%; text-align: center;">Completed (Y/N)</th>`;
                trackingSheetHtml += `<th style="background-color: #f3f4f6; padding: 8px; border: 1px solid #d1d5db; color: #1f2937; width: 15%; text-align: center;">Effort (1-5)</th>`;
                trackingSheetHtml += `<th style="background-color: #f3f4f6; padding: 8px; border: 1px solid #d1d5db; color: #1f2937; width: 30%;">Notes & Progress</th>`;
                trackingSheetHtml += `</tr></thead><tbody>`;

                for (let day = 0; day < 7; day++) {
                    const index = week * 7 + day;
                    const dayNumber = index + 1;
                    
                    const workoutIds = challengePlan[index];
                    const mainWorkoutIds = workoutIds.filter(id => id !== WARM_UP_ID && id !== COOL_DOWN_ID);
                    const workouts = mainWorkoutIds.map(id => getWorkoutById(id)).filter(w => w !== undefined);
                    
                    let scheduledWorkouts = '';
                    if (workouts.length > 0) {
                         scheduledWorkouts = workouts.map(w => `<span style="color: ${w.type === 'REST' ? '#dc2626' : '#1f2937'};">${w.name}</span>`).join('<br>');
                    } else {
                        scheduledWorkouts = '<span style="color: #9ca3af; font-style: italic;">Unplanned</span>';
                    }

                    trackingSheetHtml += `<tr>`;
                    trackingSheetHtml += `<td style="padding: 8px; border: 1px solid #d1d5db; background-color: ${day % 2 === 0 ? '#fafafa' : '#ffffff'};">Day ${dayNumber} (${daysOfWeek[day]})</td>`;
                    trackingSheetHtml += `<td style="padding: 8px; border: 1px solid #d1d5db; background-color: ${day % 2 === 0 ? '#fafafa' : '#ffffff'};">${scheduledWorkouts}</td>`;
                    trackingSheetHtml += `<td style="padding: 8px; border: 1px solid #d1d5db; background-color: ${day % 2 === 0 ? '#fafafa' : '#ffffff'}; text-align: center;"></td>`;
                    trackingSheetHtml += `<td style="padding: 8px; border: 1px solid #d1d5db; background-color: ${day % 2 === 0 ? '#fafafa' : '#ffffff'}; text-align: center;"></td>`;
                    trackingSheetHtml += `<td style="padding: 8px; border: 1px solid #d1d5db; background-color: ${day % 2 === 0 ? '#fafafa' : '#ffffff'}; height: 30px;"></td>`; // Empty space for notes
                    trackingSheetHtml += `</tr>`;
                }

                trackingSheetHtml += `</tbody></table>`;

// Force each week’s tracking table to start on a new printed page
trackingSheetHtml += `<div style="page-break-before: always;"></div>`;

            }

            docContent += trackingSheetHtml;


            // 5. Final Output to Print Window
            const w = window.open();
            w.document.write(`
                <html class="p-8 font-sans">
                    <head>
                        <title>${challengeTitle} Document</title>
                        <style>
                            /* Styles for the print view */
                            body {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 30px;
  line-height: 1.6;
  font-family: 'Inter', sans-serif;
}

@page {
  size: A4;
  margin: 20mm;
}

@media print {
  html, body {
    width: 100%;
    height: auto;
    margin: 0;
    padding: 0;
  }
  body > * {
    page-break-inside: avoid;
  }
  img {
    max-width: 100% !important;
    height: auto !important;
  }
}


                            h1 { font-size: 2.5rem; color: #14b8a6; text-align: center; margin-bottom: 10px;} 
                            h2 { font-size: 1.5rem; color: #1f2937; margin-top: 1.5rem; margin-bottom: 0.5rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.3rem; }
                            h3 { font-size: 1.4rem; color: #374151; margin-top: 0; }
                            h4 { font-size: 1.1rem; color: #4b5563; font-weight: bold; }
                            p, ul, ol, li, table { font-size: 1rem; color: #4b5563; }

                            /* Updated list styling for bullet points */
                            ul, ol { 
                                margin: 10px 0 10px 0; 
                                padding-left: 20px;
                            }
                            li {
                                margin-bottom: 8px; /* Added spacing between list items */
                            }
                            
                            .print-button { 
                                margin-top: 2rem; padding: 0.75rem 1.5rem; 
                                background-color: #14b8a6; color: white; 
                                font-weight: bold; border-radius: 0.5rem; cursor: pointer; border: none; 
                                display: block; width: 250px; margin-left: auto; margin-right: auto; text-align: center;
                                text-decoration: none;
                            }
                            @media print { .print-button { display: none; } }
                        </style>
                    </head>
                    <body>
                        <h1>🏋️ ${challengeTitle} Plan</h1>
                        <p style="text-align: center; color: #6b7280; margin-bottom: 30px;">Your complete 28-day fitness schedule, designed for easy tracking and reference.</p>
                        <a href="#" class="print-button" onclick="window.print(); return false;">Print Challenge Document</a>
                        ${docContent}
                        <a href="#" class="print-button" onclick="window.print(); return false;">Print Challenge Document</a>
                    </body>
                </html>
            `);
            w.document.close();
        };


        const openAutoFillOptions = () => {
            document.getElementById('autoFillOptionsModal').classList.remove('hidden');
            // Ensure one option is checked by default if none are
            if (!document.querySelector('input[name="goal"]:checked')) {
                document.querySelector('input[name="goal"][value="Weight Loss"]').checked = true;
            }
            if (!document.querySelector('input[name="difficulty"]:checked')) {
                document.querySelector('input[name="difficulty"][value="Intermediate"]').checked = true;
            }
        };


        const closeAutoFillOptions = () => {
            document.getElementById('autoFillOptionsModal').classList.add('hidden');
        };
        
        // --- Title Editing Functions ---
        const startEditTitle = () => {
            const titleH1 = document.getElementById('mainChallengeTitle');
            const oldTitle = challengeTitle;

            // Replace H1 with an input field
            const input = document.createElement('input');
            input.type = 'text';
            input.value = oldTitle;
            input.className = 'text-4xl font-extrabold text-primary-dark text-center bg-light-text rounded-lg px-2 py-1 w-full max-w-xl mx-auto focus:outline-none focus:ring-4 ring-accent-cyan';
            input.id = 'editInput';
            
            // Replace the H1 with the input
            titleH1.parentNode.insertBefore(input, titleH1);
            titleH1.classList.add('hidden');
            document.getElementById('editTitleBtn').classList.add('hidden');
            
            input.focus();
            input.setSelectionRange(0, input.value.length);

            const finishEdit = () => {
                let newTitle = input.value.trim();
                if (newTitle === '') {
                    newTitle = oldTitle; // Revert if empty
                }

                challengeTitle = newTitle;
                titleH1.textContent = newTitle;

                // Restore H1 and button, remove input
                titleH1.classList.remove('hidden');
                document.getElementById('editTitleBtn').classList.remove('hidden');
                input.remove();

                savePlan();
            };

            input.addEventListener('blur', finishEdit);
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    finishEdit();
                    e.preventDefault();
                }
            });
        };


        // --- Event Listeners and Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            loadPlan(); 
            renderApp(); 


            // Global buttons
            document.getElementById('autoFillBtn').addEventListener('click', openAutoFillOptions); 
            document.getElementById('clearPlanBtn').addEventListener('click', clearPlan);
            document.getElementById('generatePrintBtn').addEventListener('click', generateChallengeDocument);


            // Listeners for Modals
            document.getElementById('workoutSelectionModal').addEventListener('click', (e) => {
                if (e.target.id === 'workoutSelectionModal' || e.target.closest('#modalCloseBtn')) {
                    closeWorkoutSelection();
                }
            });
            document.getElementById('confirmSelectionBtn').addEventListener('click', confirmSelection);
            
            document.getElementById('autoFillOptionsModal').addEventListener('click', (e) => {
                 if (e.target.id === 'autoFillOptionsModal' || e.target.closest('#autoFillCloseBtn')) {
                    closeAutoFillOptions();
                }
            });
            document.getElementById('executeAutoFillBtn').addEventListener('click', executeAutoFill);
        });


        // Expose functions for inline onclick/script access
        window.clearPlan = clearPlan;
        window.setFilter = setFilter;
        window.toggleWorkoutSelection = toggleWorkoutSelection;
        window.toggleWorkoutDetails = toggleWorkoutDetails;
        window.closeWorkoutSelection = closeWorkoutSelection;
        window.executeAutoFill = executeAutoFill; 
        window.startEditTitle = startEditTitle; // Expose new function
        
        // Custom Modal for non-alert confirmation (for clearPlan)
        document.write(`
            <div id="confirmationModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-75">
                <div class="bg-secondary-dark p-6 rounded-xl shadow-2xl w-full max-w-sm">
                    <p id="modalMessage" class="text-light-text text-lg mb-6"></p>
                    <div class="flex justify-end space-x-4">
                        <button id="cancelAction" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition duration-150">
                            Cancel
                        </button>
                        <button id="confirmAction" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-150">
                            Confirm
                        </button>
                    </div>
                </div>
            </div>
        `);
    </script>
    
    


<style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #111827; 
            color: #f3f4f6;
        }
        .challenge-cell {
            min-height: 120px;
            cursor: default; /* Change cursor to default since the status icon is the main click target on top right */
            transition: all 0.2s;
            border: 2px solid #374151;
            /* New: Focus state on hover comes from inner wrapper or the button */
        }
        .challenge-cell:hover {
            border-color: #374151; /* Keep border stable */
            box-shadow: none;
        }
        /* Style the actual clickable main content area */
        .challenge-cell > div:first-child:hover {
            opacity: 0.9;
            text-shadow: 0 0 5px rgba(243, 244, 246, 0.1);
        }
        .workout-card {
            transition: background-color 0.1s;
        }
        /* Custom scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #4b5563;
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background-color: #1f2937;
        }
        /* Custom classes for smooth height transitions */
        .max-h-expand {
            max-height: 1000px; /* Sufficiently large value */
            transition: max-height 0.4s ease-in-out;
        }
        .max-h-collapse {
            max-height: 0;
            transition: max-height 0.4s ease-in-out;
        }
    </style>
</head>
<body class="p-4 md:p-8 bg-primary-dark">


    <div id="appContainer">
        
        


<header class="text-center mb-8">
            <!-- Renamed element ID and added click handler -->
            <div class="flex justify-center items-center">
                <h1 id="mainChallengeTitle" class="text-4xl font-extrabold text-accent-teal mb-2 cursor-pointer hover:text-accent-cyan transition duration-150" onclick="startEditTitle()">
                    4-Week Home Workout Challenge
                </h1>
                <button id="editTitleBtn" onclick="startEditTitle()" class="ml-3 mb-2 text-gray-400 hover:text-accent-teal transition duration-150">
                    <i class="fas fa-edit"></i>
                </button>
            </div>
            <p class="text-lg text-gray-300">Your personalized, local fitness plan generator.</p>
        </header>


        


<div id="scheduleView" class="lg:w-full">
            <div class="flex flex-wrap gap-4 mb-6">
                <button id="autoFillBtn" class="flex-1 min-w-[150px] bg-accent-teal hover:bg-teal-600 text-primary-dark font-bold py-3 px-4 rounded-xl shadow-md transition duration-200">
                    <i class="fas fa-magic mr-2"></i> Auto-Fill Challenge
                </button>
                <button id="clearPlanBtn" class="flex-1 min-w-[150px] bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-xl shadow-md transition duration-200">
                    <i class="fas fa-trash mr-2"></i> Clear Plan
                </button>
                <button id="generatePrintBtn" class="flex-1 min-w-[150px] bg-accent-cyan hover:bg-cyan-600 text-primary-dark font-bold py-3 px-4 rounded-xl shadow-md transition duration-200">
                    <i class="fas fa-file-alt mr-2"></i> Create Challenge Document
                </button>
            </div>
    
            <div class="bg-secondary-dark p-4 md:p-6 rounded-xl shadow-2xl border border-gray-700">
                <h2 class="text-2xl font-bold text-light-text mb-4">Your 28-Day Schedule</h2>
                <!-- UPDATED GRID CLASSES FOR BETTER MOBILE RESPONSIVENESS -->
                <div id="challengeGrid" class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3">
                    <p class="col-span-7 text-center text-gray-400">Loading workouts...</p>
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- Workout Selection Modal (Used in Schedule View) -->
    <div id="workoutSelectionModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-90">
        <div class="bg-primary-dark p-6 rounded-xl shadow-2xl w-full max-w-4xl h-[90%] overflow-y-auto border border-gray-700 flex flex-col">
            <div class="flex justify-between items-center mb-6 border-b border-gray-700 pb-3 sticky top-0 bg-primary-dark z-10">
                <h2 id="modalTitle" class="text-3xl font-extrabold text-accent-teal">Edit Workouts</h2>
                <button id="modalCloseBtn" class="text-gray-400 hover:text-red-500 transition duration-150">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>


            <div id="modalFilterContainer" class="flex flex-wrap gap-2 mb-6 sticky top-[80px] bg-primary-dark py-2 border-b border-gray-800 z-10">
                <!-- Filters will be rendered here -->
            </div>


            <div id="modalWorkoutList" class="custom-scroll flex-grow overflow-y-auto pr-4">
                <!-- Workout list will be rendered here -->
            </div>
            
            <div class="mt-6 pt-4 border-t border-gray-700 sticky bottom-0 bg-primary-dark z-10">
                <button id="confirmSelectionBtn" class="w-full bg-accent-cyan hover:bg-cyan-600 text-primary-dark font-extrabold py-3 rounded-xl shadow-lg transition duration-200">
                    <i class="fas fa-save mr-2"></i> Confirm Selection
                </button>
            </div>
        </div>
    </div>
    
    <!-- Auto-Fill Options Modal (Used in Schedule View) -->
    <div id="autoFillOptionsModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-90">
        <div class="bg-secondary-dark p-6 rounded-xl shadow-2xl w-full max-w-lg border border-gray-700">
            
            <div class="flex justify-between items-center mb-6 border-b border-gray-700 pb-3">
                <h2 class="text-3xl font-extrabold text-accent-teal"><i class="fas fa-magic mr-2"></i> Auto-Fill Options</h2>
                <button id="autoFillCloseBtn" class="text-gray-400 hover:text-red-500 transition duration-150">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>


            <div class="mb-6">
                <h3 class="text-xl font-semibold text-light-text mb-3">1. Select Your Primary Goal</h3>
                <div class="flex flex-wrap gap-3">
                    <label class="flex-1">
                        <input type="radio" name="goal" value="Weight Loss" class="hidden peer" checked>
                        <div class="p-4 rounded-xl border-2 border-gray-600 bg-primary-dark text-center cursor-pointer peer-checked:bg-accent-teal peer-checked:border-accent-teal peer-checked:text-primary-dark font-bold transition duration-200 shadow-lg">
                            Weight Loss
                        </div>
                    </label>
                    <label class="flex-1">
                        <input type="radio" name="goal" value="Muscle Building" class="hidden peer">
                        <div class="p-4 rounded-xl border-2 border-gray-600 bg-primary-dark text-center cursor-pointer peer-checked:bg-accent-teal peer-checked:border-accent-teal peer-checked:text-primary-dark font-bold transition duration-200 shadow-lg">
                            Muscle Building
                        </div>
                    </label>
                    <label class="flex-1">
                        <input type="radio" name="goal" value="Maintenance" class="hidden peer">
                        <div class="p-4 rounded-xl border-2 border-gray-600 bg-primary-dark text-center cursor-pointer peer-checked:bg-accent-teal peer-checked:border-accent-teal peer-checked:text-primary-dark font-bold transition duration-200 shadow-lg">
                            Maintenance
                        </div>
                    </label>
                </div>
            </div>


            <div class="mb-8">
                <h3 class="text-xl font-semibold text-light-text mb-3">2. Select Your Experience Level</h3>
                <div class="flex flex-wrap gap-3">
                    <label class="flex-1">
                        <input type="radio" name="difficulty" value="Beginner" class="hidden peer">
                        <div class="p-4 rounded-xl border-2 border-gray-600 bg-primary-dark text-center cursor-pointer peer-checked:bg-accent-cyan peer-checked:border-accent-cyan peer-checked:text-primary-dark font-bold transition duration-200 shadow-lg">
                            Beginner
                        </div>
                    </label>
                    <label class="flex-1">
                        <input type="radio" name="difficulty" value="Intermediate" class="hidden peer" checked>
                        <div class="p-4 rounded-xl border-2 border-gray-600 bg-primary-dark text-center cursor-pointer peer-checked:bg-accent-cyan peer-checked:border-accent-cyan peer-checked:text-primary-dark font-bold transition duration-200 shadow-lg">
                            Intermediate
                        </div>
                    </label>
                    <label class="flex-1">
                        <input type="radio" name="difficulty" value="Advanced" class="hidden peer">
                        <div class="p-4 rounded-xl border-2 border-gray-600 bg-primary-dark text-center cursor-pointer peer-checked:bg-accent-cyan peer-checked:border-accent-cyan peer-checked:text-primary-dark font-bold transition duration-200 shadow-lg">
                            Advanced
                        </div>
                    </label>
                </div>
            </div>


            <button id="executeAutoFillBtn" class="w-full bg-accent-teal hover:bg-teal-600 text-primary-dark font-extrabold py-3 rounded-xl shadow-lg transition duration-200">
                Generate 4-Week Plan
            </button>
        </div>
    </div>
    
</body>
</html>


